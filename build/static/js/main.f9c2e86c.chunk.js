(this["webpackJsonpvosk-browser-react-demo"]=this["webpackJsonpvosk-browser-react-demo"]||[]).push([[0],{119:function(e,n,t){},136:function(e,n){},138:function(e,n){},149:function(e,n,t){"use strict";t.r(n);var a,c,r,o,i,u,s,l,d,j,b,f=t(20),p=(t(114),t(0)),O=t.n(p),h=t(25),g=t.n(h),x=t(21),m=(t(119),t(37)),v=t.n(m),w=t(110),S=t(58),y=t(26),k=t(78),z=t(91),M=t(151),C=t(154),R=t(6),A=Object(x.a)(k.a)(a||(a=Object(f.a)(["\n  box-sizing: border-box;\n  margin-left: 0.5rem;\n"]))),L=function(e){var n=e.recognizer,t=e.ready,a=e.loading,c=Object(p.useRef)(null);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(M.a,{onChange:function(e){var t=e.file;if(n&&c.current){var a=URL.createObjectURL(t.originFileObj),r=c.current;r.src=a;var o=new AudioContext,i=o.createScriptProcessor(4096,1,1);i.onaudioprocess=function(e){try{r.currentTime<r.duration&&!r.paused&&n.acceptWaveform(e.inputBuffer)}catch(t){console.error("acceptWaveform failed",t)}},o.createMediaElementSource(r).connect(i)}},customRequest:function(e){e.file;(0,e.onSuccess)("ok")},accept:"audio/*",showUploadList:!1,children:Object(R.jsx)(A,{icon:Object(R.jsx)(C.a,{}),disabled:!t||a,children:"Upload File"})}),Object(R.jsx)("audio",{ref:c,autoPlay:!0})]})},B=t(155),E=t(156),U=t(101),F=t.n(U),W=t(102),D=t(103),I=t(112),J=t(109),P=t(54),T=function(e){Object(I.a)(t,e);var n=Object(J.a)(t);function t(e,a){var c;return Object(W.a)(this,t),(c=n.call(this,a)).recognizer=e,c}return Object(D.a)(t,[{key:"_write",value:function(e,n,t){var a=e.getChannelData(0);this.recognizer&&a.byteLength>0&&this.recognizer.acceptWaveform(e),t()}}]),t}(P.Duplex),_=new P.Writable({write:function(e,n,t){t()},objectMode:!0,decodeStrings:!1}),q=function(e){var n=e.recognizer,t=e.loading,a=e.ready,o=Object(p.useState)(!0),i=Object(y.a)(o,2),u=i[0],s=i[1],l=Object(p.useCallback)(Object(S.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=20;break}if(s(!0),c){e.next=17;break}return t=null,e.prev=4,e.next=7,navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0}});case 7:t=e.sent,(c=new F.a({objectMode:!0,bufferSize:1024})).setStream(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0);case 15:e.next=19;break;case 17:c.unpipe(r),c.pipe(_);case 19:r=new T(n,{objectMode:!0});case 20:case"end":return e.stop()}}),e,null,[[4,12]])}))),[n]);Object(p.useEffect)((function(){l()}),[n]),Object(p.useEffect)((function(){s(!0)}),[t]),Object(p.useEffect)((function(){var e,n,t,a;u?(null===(e=c)||void 0===e||e.unpipe(r),null===(n=c)||void 0===n||n.pipe(_)):(null===(t=c)||void 0===t||t.unpipe(_),null===(a=c)||void 0===a||a.pipe(r))}),[u]);return Object(R.jsx)(k.a,{icon:u?Object(R.jsx)(B.a,{}):Object(R.jsx)(E.a,{}),disabled:!a||t,onMouseUp:function(){s((function(e){return!e}))},children:"Speak"})},G=t(152),K=G.a.Option,N=x.a.div(o||(o=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n"]))),V=Object(x.a)(k.a)(i||(i=Object(f.a)(["\n  box-sizing: border-box;\n  margin-left: 0.5rem;\n"]))),Y=[{name:"Bangla ASR",path:"bangla_model.tar.gz"},{name:"Indian English",path:"vosk-model-small-en-in-0.4.tar.gz"}],H=function(e){var n=e.onModelChange,t=e.onModelSelect,a=e.loading,c=Object(p.useState)(Y[0].path),r=Object(y.a)(c,2),o=r[0],i=r[1];return Object(R.jsxs)(N,{children:[Object(R.jsx)(G.a,{style:{height:"2rem",margin:"auto 0",width:"10rem"},defaultValue:Y[0].path,onChange:function(e){n(e),i(e)},children:Y.map((function(e,n){return Object(R.jsx)(K,{value:e.path,children:e.name},n)}))}),Object(R.jsx)(V,{onClick:function(){return t(o)},children:a?"Loading...":"Load"})]})},Q=x.a.div(u||(u=Object(f.a)(["\n  width: 80%;\n  text-align: left;\n  max-width: 700px;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n"]))),X=x.a.div(s||(s=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  margin: 1rem auto;\n"]))),Z=(Object(x.a)(k.a)(l||(l=Object(f.a)(["\n  box-sizing: border-box;\n  margin-left: 0.5rem;\n"]))),x.a.div(d||(d=Object(f.a)(["\n  width: 100%;\n  height: 40%;\n  margin: 1rem auto;\n  border: 1px solid #aaaaaa;\n  padding: 1rem;\n  resize: vertical;\n  overflow: auto;\n"])))),$=x.a.span(j||(j=Object(f.a)(["\n  color: ",";\n  white-space: normal;\n"])),(function(e){var n=e.confidence,t=Math.max(255*(1-n)-20,0);return"rgb(".concat(t,",").concat(t,",").concat(t,")")})),ee=(new Map,function(){var e=Object(p.useState)([]),n=Object(y.a)(e,2),t=n[0],a=n[1],c=Object(p.useState)(""),r=Object(y.a)(c,2),o=r[0],i=r[1],u=Object(p.useState)(),s=Object(y.a)(u,2),l=s[0],d=s[1],j=Object(p.useState)(),b=Object(y.a)(j,2),f=b[0],O=b[1],h=Object(p.useState)(!1),g=Object(y.a)(h,2),x=g[0],m=g[1],k=Object(p.useState)(!1),M=Object(y.a)(k,2),C=M[0],A=M[1],B=function(){var e=Object(S.a)(v.a.mark((function e(n){var t,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),null===l||void 0===l||l.model.terminate(),e.next=4,Object(z.createModel)("/asr-bangla/models/"+n);case 4:t=e.sent,d({model:t,path:n}),(c=new t.KaldiRecognizer).on("result",(function(e){var n=e.result;a((function(e){return[].concat(Object(w.a)(e),[n])}))})),c.on("partialresult",(function(e){i(e.result.partial)})),O((function(){return m(!1),A(!0),c}));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(R.jsxs)(Q,{children:[Object(R.jsx)(H,{onModelChange:function(e){return A((null===l||void 0===l?void 0:l.path)===e)},onModelSelect:function(e){(null===l||void 0===l?void 0:l.path)!==e&&B(e)},loading:x}),Object(R.jsxs)(X,{children:[Object(R.jsx)(q,{recognizer:f,loading:x,ready:C}),Object(R.jsx)(L,{recognizer:f,loading:x,ready:C})]}),Object(R.jsxs)(Z,{children:[t.map((function(e,n){var t;return null===e||void 0===e||null===(t=e.result)||void 0===t?void 0:t.map((function(e,t){return Object(R.jsxs)($,{confidence:e.conf,title:"Confidence: ".concat((100*e.conf).toFixed(2),"%"),children:[e.word," "]},"".concat(n,"-").concat(t))}))})),Object(R.jsx)("span",{children:o},"partial")]})]})}),ne=x.a.div(b||(b=Object(f.a)(["\n  text-align: center;\n  margin: auto;\n  justify-content: center;\n"])));g.a.render(Object(R.jsx)(O.a.StrictMode,{children:Object(R.jsxs)(ne,{children:[Object(R.jsx)("h1",{children:"ASR BANGLA"}),Object(R.jsx)("h1",{children:"An Automatic Speech Recognition System for Bangla Language"}),Object(R.jsxs)("p",{children:["Select a language and load the model to start speech recognition. ",Object(R.jsx)("br",{}),"You can either upload a file or speak on the microphone."]}),Object(R.jsx)(ee,{}),Object(R.jsx)("p",{children:Object(R.jsx)("a",{href:"#",children:"ASR Bangla @ Md Rezowan Talukder"})})]})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.f9c2e86c.chunk.js.map